{"version":3,"file":"VDateInput.js","names":["makeVConfirmEditProps","VConfirmEdit","makeVDatePickerProps","VDatePicker","useInputIcon","VMenu","makeVTextFieldProps","VTextField","useCalendarRange","useDate","createDateRange","makeDateFormatProps","useDateFormat","makeDisplayProps","useDisplay","makeFocusProps","forwardRefs","useLocale","useProxiedModel","computed","ref","shallowRef","watch","genericComponent","omit","pick","propsFactory","useRender","wrapInArray","makeVDateInputProps","displayFormat","type","Function","String","default","undefined","location","menu","Boolean","menuProps","Object","updateOn","Array","pickerProps","mobile","hideActions","prependIcon","hideHeader","showAdjacentMonths","VDateInput","name","props","emits","save","value","cancel","val","setup","_ref","emit","slots","t","current","currentLocale","adapter","isValid","parseDate","formatDate","parserFormat","InputIcon","clampDate","isInAllowedRange","emptyModelValue","multiple","model","isArray","map","item","toJsDate","date","isEditingInput","isFocused","focused","vTextFieldRef","disabledActions","format","display","length","start","end","inputmode","isInteractive","disabled","readonly","isReadonly","onKeydown","e","key","includes","onUserInput","target","onClick","preventDefault","stopPropagation","onCancel","onSave","onUpdateDisplayModel","onBlur","_ref2","trim","parts","split","every","stop","toSorted","a","b","isAfter","filter","hasPrepend","prepend","confirmEditProps","filterProps","datePickerProps","datePickerSlots","textFieldProps","_createVNode","_mergeProps","class","style","placeholder","event","_createElementVNode","_Fragment","$event","_ref3","actions","proxyModel","isPristine","onUpdateModel","prependSlotProps"],"sources":["../../../src/labs/VDateInput/VDateInput.tsx"],"sourcesContent":["// Components\nimport { makeVConfirmEditProps, VConfirmEdit } from '@/components/VConfirmEdit/VConfirmEdit'\nimport { makeVDatePickerProps, VDatePicker } from '@/components/VDatePicker/VDatePicker'\nimport { useInputIcon } from '@/components/VInput/InputIcon'\nimport { VMenu } from '@/components/VMenu/VMenu'\nimport { makeVTextFieldProps, VTextField } from '@/components/VTextField/VTextField'\n\n// Composables\nimport { useCalendarRange } from '@/composables/calendar'\nimport { useDate } from '@/composables/date'\nimport { createDateRange } from '@/composables/date/date'\nimport { makeDateFormatProps, useDateFormat } from '@/composables/dateFormat'\nimport { makeDisplayProps, useDisplay } from '@/composables/display'\nimport { makeFocusProps } from '@/composables/focus'\nimport { forwardRefs } from '@/composables/forwardRefs'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, ref, shallowRef, watch } from 'vue'\nimport { genericComponent, omit, pick, propsFactory, useRender, wrapInArray } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VDatePickerSlots } from '@/components/VDatePicker/VDatePicker'\nimport type { StrategyProps } from '@/components/VOverlay/locationStrategies'\nimport type { VTextFieldSlots } from '@/components/VTextField/VTextField'\nimport type { GenericProps } from '@/util'\n\n// Types\nexport type VDateInputActionsSlot = {\n  save: () => void\n  cancel: () => void\n  isPristine: boolean\n}\n\nexport type VDateInputSlots = Omit<VTextFieldSlots, 'default'> &\n  Pick<VDatePickerSlots, 'title' | 'header' | 'day' | 'month' | 'year'> & {\n    actions: VDateInputActionsSlot\n    default: never\n  }\n\nexport const makeVDateInputProps = propsFactory({\n  displayFormat: {\n    type: [Function, String] as PropType<string | ((date: unknown) => any)>,\n    default: undefined,\n  },\n  location: {\n    type: String as PropType<StrategyProps['location']>,\n    default: 'bottom start',\n  },\n  menu: Boolean,\n  menuProps: Object as PropType<VMenu['$props']>,\n  updateOn: {\n    type: Array as PropType<('blur' | 'enter')[]>,\n    default: () => ['blur', 'enter'],\n  },\n  pickerProps: Object as PropType<VDatePicker['$props']>,\n\n  ...makeDateFormatProps(),\n  ...makeDisplayProps({\n    mobile: null,\n  }),\n  ...makeFocusProps(),\n  ...makeVConfirmEditProps({\n    hideActions: true,\n  }),\n  ...makeVTextFieldProps({\n    prependIcon: '$calendar',\n  }),\n  ...omit(makeVDatePickerProps({\n    hideHeader: true,\n    showAdjacentMonths: true,\n  }), [\n    'location',\n    'rounded',\n    'height',\n    'minHeight',\n    'maxHeight',\n  ]),\n}, 'VDateInput')\n\nexport const VDateInput = genericComponent<new <\n  T,\n  Multiple extends boolean | 'range' | number | (string & {}) = false,\n  TModel = Multiple extends true | number | string\n    ? T[]\n    : T,\n> (\n  props: {\n    modelValue?: TModel\n    onSave?: (value: TModel) => void\n    'onUpdate:modelValue'?: (value: TModel) => void\n    multiple?: Multiple\n  },\n  slots: VDateInputSlots\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VDateInput',\n\n  props: makeVDateInputProps(),\n\n  emits: {\n    save: (value: unknown) => true,\n    cancel: () => true,\n    'update:focused': (val: boolean) => true,\n    'update:modelValue': (val: unknown) => true,\n    'update:menu': (val: boolean) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const { t, current: currentLocale } = useLocale()\n    const adapter = useDate()\n    const { isValid, parseDate, formatDate, parserFormat } = useDateFormat(props, currentLocale)\n    const { mobile } = useDisplay(props)\n    const { InputIcon } = useInputIcon(props)\n\n    const { clampDate, isInAllowedRange } = useCalendarRange(props)\n\n    const emptyModelValue = () => props.multiple ? [] : null\n\n    const model = useProxiedModel(\n      props,\n      'modelValue',\n      emptyModelValue(),\n      val => Array.isArray(val) ? val.map(item => adapter.toJsDate(item)) : val ? adapter.toJsDate(val) : val,\n      val => Array.isArray(val) ? val.map(item => adapter.date(item)) : val ? adapter.date(val) : val\n    )\n\n    const menu = useProxiedModel(props, 'menu')\n    const isEditingInput = shallowRef(false)\n    const isFocused = shallowRef(props.focused)\n    const vTextFieldRef = ref<VTextField>()\n    const disabledActions = ref<typeof VConfirmEdit['props']['disabled']>(['save'])\n\n    function format (date: unknown) {\n      if (typeof props.displayFormat === 'function') {\n        return props.displayFormat(date)\n      }\n      if (props.displayFormat) {\n        return adapter.format(date, props.displayFormat ?? 'keyboardDate')\n      }\n      return formatDate(date)\n    }\n\n    const display = computed(() => {\n      const value = wrapInArray(model.value)\n\n      if (!value.length) return null\n\n      if (props.multiple === true) {\n        return t('$vuetify.datePicker.itemsSelected', value.length)\n      }\n\n      if (props.multiple === 'range') {\n        const start = value[0]\n        const end = value[value.length - 1]\n\n        if (!adapter.isValid(start) || !adapter.isValid(end)) return ''\n\n        return `${format(adapter.date(start))} - ${format(adapter.date(end))}`\n      }\n\n      return adapter.isValid(model.value) ? format(adapter.date(model.value)) : ''\n    })\n\n    const inputmode = computed(() => {\n      if (!mobile.value) return undefined\n      if (isEditingInput.value) return 'text'\n\n      return 'none'\n    })\n\n    const isInteractive = computed(() => !props.disabled && !props.readonly)\n\n    const isReadonly = computed(() => {\n      if (!props.updateOn.length) return true\n\n      return !(mobile.value && isEditingInput.value) && props.readonly\n    })\n\n    watch(menu, val => {\n      if (val) return\n\n      isEditingInput.value = false\n      disabledActions.value = ['save']\n    })\n\n    function onKeydown (e: KeyboardEvent) {\n      if (e.key !== 'Enter') return\n\n      if (!menu.value || !isFocused.value) {\n        menu.value = true\n      }\n\n      if (props.updateOn.includes('enter') && !props.readonly) {\n        onUserInput(e.target as HTMLInputElement)\n      }\n    }\n\n    function onClick (e: MouseEvent) {\n      if (props.disabled) return\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      if (menu.value && mobile.value) {\n        isEditingInput.value = !props.readonly\n      } else {\n        menu.value = true\n      }\n    }\n\n    function onCancel () {\n      emit('cancel')\n      menu.value = false\n      isEditingInput.value = false\n    }\n\n    function onSave (value: string) {\n      emit('save', value)\n      menu.value = false\n    }\n\n    function onUpdateDisplayModel (value: unknown) {\n      if (value != null) return\n\n      model.value = emptyModelValue()\n    }\n\n    function onBlur (e: FocusEvent) {\n      if (props.updateOn.includes('blur') && !props.readonly) {\n        onUserInput(e.target as HTMLInputElement)\n      }\n\n      // When in mobile mode and editing is done (due to keyboard dismissal), close the menu\n      if (mobile.value && isEditingInput.value && !isFocused.value) {\n        menu.value = false\n        isEditingInput.value = false\n      }\n    }\n\n    function onUserInput ({ value }: HTMLInputElement) {\n      if (!value.trim()) {\n        model.value = emptyModelValue()\n      } else if (!props.multiple) {\n        if (isValid(value)) {\n          model.value = clampDate(parseDate(value))\n        }\n      } else {\n        const parts = value.trim().split(/\\D+-\\D+|[^\\d\\-/.]+/)\n        if (parts.every(isValid)) {\n          if (props.multiple === 'range') {\n            const [start, stop] = parts\n              .map(parseDate)\n              .map(clampDate)\n              .toSorted((a, b) => adapter.isAfter(a, b) ? 1 : -1)\n            model.value = createDateRange(adapter, start, stop)\n          } else {\n            model.value = parts\n              .map(parseDate)\n              .filter(isInAllowedRange)\n          }\n        }\n      }\n    }\n\n    useRender(() => {\n      const hasPrepend = !!(props.prependIcon || slots.prepend)\n      const confirmEditProps = VConfirmEdit.filterProps(props)\n      const datePickerProps = {\n        ...VDatePicker.filterProps(omit(props, [\n          'active',\n          'bgColor',\n          'color',\n          'location',\n          'rounded',\n          'maxWidth',\n          'minWidth',\n          'width',\n        ])),\n        ...props.pickerProps,\n      }\n      const datePickerSlots = pick(slots, ['title', 'header', 'day', 'month', 'year'])\n      const textFieldProps = VTextField.filterProps(omit(props, ['placeholder']))\n\n      return (\n        <VTextField\n          ref={ vTextFieldRef }\n          { ...textFieldProps }\n          class={['v-date-input', props.class]}\n          style={ props.style }\n          modelValue={ display.value }\n          inputmode={ inputmode.value }\n          placeholder={ props.placeholder ?? parserFormat.value }\n          readonly={ isReadonly.value }\n          onKeydown={ isInteractive.value ? onKeydown : undefined }\n          focused={ menu.value || isFocused.value }\n          onBlur={ onBlur }\n          validationValue={ model.value }\n          onClick:control={ onClick }\n          onUpdate:modelValue={ onUpdateDisplayModel }\n          onUpdate:focused={ event => isFocused.value = event }\n        >\n          {{\n            ...slots,\n            default: () => (\n              <>\n                <VMenu\n                  v-model={ menu.value }\n                  activator=\"parent\"\n                  minWidth=\"0\"\n                  eager={ isFocused.value }\n                  location={ props.location }\n                  closeOnContentClick={ false }\n                  openOnClick={ false }\n                  { ...props.menuProps }\n                >\n                  <VConfirmEdit\n                    { ...confirmEditProps }\n                    v-model={ model.value }\n                    disabled={ disabledActions.value }\n                    onSave={ onSave }\n                    onCancel={ onCancel }\n                  >\n                    {{\n                      default: ({ actions, model: proxyModel, save, cancel, isPristine }) => {\n                        function onUpdateModel (value: string) {\n                          if (!props.hideActions) {\n                            proxyModel.value = value\n                          } else {\n                            model.value = value\n\n                            if (!props.multiple) {\n                              menu.value = false\n                            }\n                          }\n\n                          emit('save', value)\n\n                          disabledActions.value = []\n                        }\n\n                        return (\n                          <VDatePicker\n                            { ...datePickerProps }\n                            modelValue={ props.hideActions ? model.value : proxyModel.value }\n                            onUpdate:modelValue={ value => onUpdateModel(value) }\n                            onMousedown={ (e: MouseEvent) => e.preventDefault() }\n                          >\n                            {{\n                              ...datePickerSlots,\n                              actions: !props.hideActions ? () => slots.actions?.({ save, cancel, isPristine }) ?? actions() : undefined,\n                            }}\n                          </VDatePicker>\n                        )\n                      },\n                    }}\n                  </VConfirmEdit>\n                </VMenu>\n\n                { slots.default?.() }\n              </>\n            ),\n            prepend: hasPrepend ? prependSlotProps => (\n              slots.prepend\n                ? slots.prepend(prependSlotProps)\n                : (props.prependIcon && (\n                  <InputIcon\n                    key=\"prepend-icon\"\n                    name=\"prepend\"\n                    tabindex={ props['onClick:prepend'] ? undefined : -1 }\n                    onClick={ isInteractive.value ? onClick : undefined }\n                  />\n                ))\n            ) : undefined,\n          }}\n        </VTextField>\n      )\n    })\n\n    return forwardRefs({}, vTextFieldRef)\n  },\n})\n\nexport type VDateInput = InstanceType<typeof VDateInput>\n"],"mappings":"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","ignoreList":[]}