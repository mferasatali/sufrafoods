{"version":3,"file":"nested.js","names":["useProxiedModel","computed","inject","nextTick","onBeforeMount","onBeforeUnmount","provide","ref","shallowRef","toRaw","toRef","toValue","watch","independentActiveStrategy","independentSingleActiveStrategy","leafActiveStrategy","leafSingleActiveStrategy","listOpenStrategy","multipleOpenStrategy","singleOpenStrategy","branchSelectStrategy","classicSelectStrategy","independentSelectStrategy","independentSingleSelectStrategy","leafSelectStrategy","leafSingleSelectStrategy","trunkSelectStrategy","consoleError","getCurrentInstance","propsFactory","throttle","VNestedSymbol","Symbol","for","emptyNested","id","root","itemsRegistration","register","unregister","updateDisabled","children","Map","parents","disabled","Set","open","openOnSelect","activate","select","activatable","scrollToActive","selectable","opened","activated","selected","selectedValues","getPath","makeNestedProps","Boolean","activeStrategy","String","Function","Object","selectStrategy","openStrategy","mandatory","type","default","useNested","props","_ref","items","returnObject","isUnmounted","v","Array","isArray","map","i","values","value","in","out","path","parent","undefined","unshift","get","vm","nodeIds","itemsUpdatePropagation","updateInternalMaps","immediate","_parents","_children","_disabled","getValue","item","raw","stack","length","itemValue","childValues","child","childValue","set","push","add","nested","arr","key","entries","parentId","isDisabled","isGroup","has","join","newPath","concat","delete","list","filter","event","emit","newOpened","newSelected","newActivated","size","useNestedItem","uidSymbol","computedId","idValue","e","isOpen","isActivated","isSelected","isIndeterminate","isLeaf","isGroupActivator","val","oldVal","useNestedGroupActivator"],"sources":["../../../src/composables/nested/nested.ts"],"sourcesContent":["// Composables\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport {\n  computed,\n  inject,\n  nextTick,\n  onBeforeMount,\n  onBeforeUnmount,\n  provide,\n  ref,\n  shallowRef,\n  toRaw,\n  toRef,\n  toValue,\n  watch,\n} from 'vue'\nimport {\n  independentActiveStrategy,\n  independentSingleActiveStrategy,\n  leafActiveStrategy,\n  leafSingleActiveStrategy,\n} from './activeStrategies'\nimport { listOpenStrategy, multipleOpenStrategy, singleOpenStrategy } from './openStrategies'\nimport {\n  branchSelectStrategy,\n  classicSelectStrategy,\n  independentSelectStrategy,\n  independentSingleSelectStrategy,\n  leafSelectStrategy,\n  leafSingleSelectStrategy,\n  trunkSelectStrategy,\n} from './selectStrategies'\nimport { consoleError, getCurrentInstance, propsFactory, throttle } from '@/util'\n\n// Types\nimport type { InjectionKey, MaybeRefOrGetter, PropType, Ref } from 'vue'\nimport type { ActiveStrategy } from './activeStrategies'\nimport type { OpenStrategy } from './openStrategies'\nimport type { SelectStrategy } from './selectStrategies'\nimport type { ListItem } from '@/composables/list-items'\nimport type { EventProp } from '@/util'\n\nexport type ActiveStrategyProp =\n  | 'single-leaf'\n  | 'leaf'\n  | 'independent'\n  | 'single-independent'\n  | ActiveStrategy\n  | ((mandatory: boolean) => ActiveStrategy)\nexport type SelectStrategyProp =\n  | 'single-leaf'\n  | 'leaf'\n  | 'independent'\n  | 'single-independent'\n  | 'classic'\n  | 'trunk'\n  | 'branch'\n  | SelectStrategy\n  | ((mandatory: boolean) => SelectStrategy)\nexport type OpenStrategyProp = 'single' | 'multiple' | 'list' | OpenStrategy\nexport type ItemsRegistrationType = 'props' | 'render'\n\nexport interface NestedProps {\n  activatable: boolean\n  selectable: boolean\n  activeStrategy: ActiveStrategyProp | undefined\n  selectStrategy: SelectStrategyProp | undefined\n  openStrategy: OpenStrategyProp | undefined\n  activated: any\n  selected: any\n  opened: any\n  mandatory: boolean\n  itemsRegistration: ItemsRegistrationType\n  'onUpdate:activated': EventProp<[any]> | undefined\n  'onUpdate:selected': EventProp<[any]> | undefined\n  'onUpdate:opened': EventProp<[any]> | undefined\n}\n\ntype NestedProvide = {\n  id: Ref<unknown>\n  isGroupActivator?: boolean\n  root: {\n    children: Ref<Map<unknown, unknown[]>>\n    parents: Ref<Map<unknown, unknown>>\n    disabled: Ref<Set<unknown>>\n    activatable: Ref<boolean>\n    selectable: Ref<boolean>\n    opened: Ref<Set<unknown>>\n    activated: Ref<Set<unknown>>\n    scrollToActive: Ref<boolean>\n    selected: Ref<Map<unknown, 'on' | 'off' | 'indeterminate'>>\n    selectedValues: Ref<unknown[]>\n    itemsRegistration: Ref<ItemsRegistrationType>\n    register: (id: unknown, parentId: unknown, isDisabled: boolean, isGroup?: boolean) => void\n    unregister: (id: unknown) => void\n    updateDisabled: (id: unknown, isDisabled: boolean) => void\n    open: (id: unknown, value: boolean, event?: Event) => void\n    activate: (id: unknown, value: boolean, event?: Event) => void\n    select: (id: unknown, value: boolean, event?: Event) => void\n    openOnSelect: (id: unknown, value: boolean, event?: Event) => void\n    getPath: (id: unknown) => unknown[]\n  }\n}\n\nexport const VNestedSymbol: InjectionKey<NestedProvide> = Symbol.for('vuetify:nested')\n\nexport const emptyNested: NestedProvide = {\n  id: shallowRef(),\n  root: {\n    itemsRegistration: ref('render'),\n    register: () => null,\n    unregister: () => null,\n    updateDisabled: () => null,\n    children: ref(new Map()),\n    parents: ref(new Map()),\n    disabled: ref(new Set()),\n    open: () => null,\n    openOnSelect: () => null,\n    activate: () => null,\n    select: () => null,\n    activatable: ref(false),\n    scrollToActive: ref(false),\n    selectable: ref(false),\n    opened: ref(new Set()),\n    activated: ref(new Set()),\n    selected: ref(new Map()),\n    selectedValues: ref([]),\n    getPath: () => [],\n  },\n}\n\nexport const makeNestedProps = propsFactory({\n  activatable: Boolean,\n  selectable: Boolean,\n  activeStrategy: [String, Function, Object] as PropType<ActiveStrategyProp>,\n  selectStrategy: [String, Function, Object] as PropType<SelectStrategyProp>,\n  openStrategy: [String, Object] as PropType<OpenStrategyProp>,\n  opened: null,\n  activated: null,\n  selected: null,\n  mandatory: Boolean,\n  itemsRegistration: {\n    type: String as PropType<ItemsRegistrationType>,\n    default: 'render',\n  },\n}, 'nested')\n\nexport const useNested = (\n  props: NestedProps,\n  {\n    items,\n    returnObject,\n    scrollToActive,\n  }: {\n    items: Ref<ListItem[]>\n    returnObject: MaybeRefOrGetter<boolean>\n    scrollToActive: MaybeRefOrGetter<boolean>\n  },\n) => {\n  let isUnmounted = false\n  const children = shallowRef(new Map<unknown, unknown[]>())\n  const parents = shallowRef(new Map<unknown, unknown>())\n  const disabled = shallowRef(new Set<unknown>())\n\n  const opened = useProxiedModel(\n    props,\n    'opened',\n    props.opened,\n    v => new Set(Array.isArray(v) ? v.map(i => toRaw(i)) : v),\n    v => [...v.values()],\n  )\n\n  const activeStrategy = computed(() => {\n    if (typeof props.activeStrategy === 'object') return props.activeStrategy\n    if (typeof props.activeStrategy === 'function') return props.activeStrategy(props.mandatory)\n\n    switch (props.activeStrategy) {\n      case 'leaf': return leafActiveStrategy(props.mandatory)\n      case 'single-leaf': return leafSingleActiveStrategy(props.mandatory)\n      case 'independent': return independentActiveStrategy(props.mandatory)\n      case 'single-independent':\n      default: return independentSingleActiveStrategy(props.mandatory)\n    }\n  })\n\n  const selectStrategy = computed(() => {\n    if (typeof props.selectStrategy === 'object') return props.selectStrategy\n    if (typeof props.selectStrategy === 'function') return props.selectStrategy(props.mandatory)\n\n    switch (props.selectStrategy) {\n      case 'single-leaf': return leafSingleSelectStrategy(props.mandatory)\n      case 'leaf': return leafSelectStrategy(props.mandatory)\n      case 'independent': return independentSelectStrategy(props.mandatory)\n      case 'single-independent': return independentSingleSelectStrategy(props.mandatory)\n      case 'trunk': return trunkSelectStrategy(props.mandatory)\n      case 'branch': return branchSelectStrategy(props.mandatory)\n      case 'classic':\n      default: return classicSelectStrategy(props.mandatory)\n    }\n  })\n\n  const openStrategy = computed(() => {\n    if (typeof props.openStrategy === 'object') return props.openStrategy\n\n    switch (props.openStrategy) {\n      case 'list': return listOpenStrategy\n      case 'single': return singleOpenStrategy\n      case 'multiple':\n      default: return multipleOpenStrategy\n    }\n  })\n\n  const activated = useProxiedModel(\n    props,\n    'activated',\n    props.activated,\n    v => activeStrategy.value.in(v, children.value, parents.value),\n    v => activeStrategy.value.out(v, children.value, parents.value),\n  )\n  const selected = useProxiedModel(\n    props,\n    'selected',\n    props.selected,\n    v => selectStrategy.value.in(v, children.value, parents.value, disabled.value),\n    v => selectStrategy.value.out(v, children.value, parents.value),\n  )\n\n  onBeforeUnmount(() => {\n    isUnmounted = true\n  })\n\n  function getPath (id: unknown) {\n    const path: unknown[] = []\n    let parent: unknown = toRaw(id)\n\n    while (parent !== undefined) {\n      path.unshift(parent)\n      parent = parents.value.get(parent)\n    }\n\n    return path\n  }\n\n  const vm = getCurrentInstance('nested')\n\n  const nodeIds = new Set<unknown>()\n\n  const itemsUpdatePropagation = throttle(() => {\n    nextTick(() => {\n      children.value = new Map(children.value)\n      parents.value = new Map(parents.value)\n    })\n  }, 100)\n\n  watch(() => [items.value, toValue(returnObject)], () => {\n    if (props.itemsRegistration === 'props') {\n      updateInternalMaps()\n    }\n  }, { immediate: true })\n\n  function updateInternalMaps () {\n    const _parents = new Map()\n    const _children = new Map()\n    const _disabled = new Set()\n\n    const getValue = toValue(returnObject)\n      ? (item: ListItem) => toRaw(item.raw)\n      : (item: ListItem) => item.value\n\n    const stack = [...items.value]\n    let i = 0\n    while (i < stack.length) {\n      const item = stack[i++]\n      const itemValue = getValue(item)\n\n      if (item.children) {\n        const childValues = []\n        for (const child of item.children) {\n          const childValue = getValue(child)\n          _parents.set(childValue, itemValue)\n          childValues.push(childValue)\n          stack.push(child)\n        }\n        _children.set(itemValue, childValues)\n      }\n\n      if (item.props.disabled) {\n        _disabled.add(itemValue)\n      }\n    }\n\n    children.value = _children\n    parents.value = _parents\n    disabled.value = _disabled\n  }\n\n  const nested: NestedProvide = {\n    id: shallowRef(),\n    root: {\n      opened,\n      activatable: toRef(() => props.activatable),\n      scrollToActive: toRef(() => toValue(scrollToActive)),\n      selectable: toRef(() => props.selectable),\n      activated,\n      selected,\n      selectedValues: computed(() => {\n        const arr = []\n\n        for (const [key, value] of selected.value.entries()) {\n          if (value === 'on') arr.push(key)\n        }\n\n        return arr\n      }),\n      itemsRegistration: toRef(() => props.itemsRegistration),\n      register: (id, parentId, isDisabled, isGroup) => {\n        if (nodeIds.has(id)) {\n          const path = getPath(id).map(String).join(' -> ')\n          const newPath = getPath(parentId).concat(id).map(String).join(' -> ')\n          consoleError(`Multiple nodes with the same ID\\n\\t${path}\\n\\t${newPath}`)\n          return\n        } else {\n          nodeIds.add(id)\n        }\n\n        parentId && id !== parentId && parents.value.set(id, parentId)\n\n        isDisabled && disabled.value.add(id)\n        isGroup && children.value.set(id, [])\n\n        if (parentId != null) {\n          children.value.set(parentId, [...children.value.get(parentId) || [], id])\n        }\n        itemsUpdatePropagation()\n      },\n      unregister: id => {\n        if (isUnmounted) return\n\n        nodeIds.delete(id)\n        children.value.delete(id)\n        disabled.value.delete(id)\n        const parent = parents.value.get(id)\n        if (parent) {\n          const list = children.value.get(parent) ?? []\n          children.value.set(parent, list.filter(child => child !== id))\n        }\n        parents.value.delete(id)\n        itemsUpdatePropagation()\n      },\n      updateDisabled: (id, isDisabled) => {\n        if (isDisabled) {\n          disabled.value.add(id)\n        } else {\n          disabled.value.delete(id)\n        }\n        // classic selection requires refresh to re-evaluate on/off/indeterminate but\n        // currently it is only run for selection interactions, so it will set new disabled\n        // to \"off\" and the visual state becomes out of sync\n        // -- selected.value = new Map(selected.value)\n        // it is not clear if the framework should un-select when disabled changed to true\n        // more discussion is needed\n      },\n      open: (id, value, event) => {\n        vm.emit('click:open', { id, value, path: getPath(id), event })\n\n        const newOpened = openStrategy.value.open({\n          id,\n          value,\n          opened: new Set(opened.value),\n          children: children.value,\n          parents: parents.value,\n          event,\n        })\n\n        newOpened && (opened.value = newOpened)\n      },\n      openOnSelect: (id, value, event) => {\n        const newOpened = openStrategy.value.select({\n          id,\n          value,\n          selected: new Map(selected.value),\n          opened: new Set(opened.value),\n          children: children.value,\n          parents: parents.value,\n          event,\n        })\n        newOpened && (opened.value = newOpened)\n      },\n      select: (id, value, event) => {\n        vm.emit('click:select', { id, value, path: getPath(id), event })\n\n        const newSelected = selectStrategy.value.select({\n          id,\n          value,\n          selected: new Map(selected.value),\n          children: children.value,\n          parents: parents.value,\n          disabled: disabled.value,\n          event,\n        })\n        newSelected && (selected.value = newSelected)\n\n        nested.root.openOnSelect(id, value, event)\n      },\n      activate: (id, value, event) => {\n        if (!props.activatable) {\n          return nested.root.select(id, true, event)\n        }\n\n        vm.emit('click:activate', { id, value, path: getPath(id), event })\n\n        const newActivated = activeStrategy.value.activate({\n          id,\n          value,\n          activated: new Set(activated.value),\n          children: children.value,\n          parents: parents.value,\n          event,\n        })\n\n        if (newActivated.size !== activated.value.size) {\n          activated.value = newActivated\n        } else {\n          for (const value of newActivated) {\n            if (!activated.value.has(value)) {\n              activated.value = newActivated\n              return\n            }\n          }\n          for (const value of activated.value) {\n            if (!newActivated.has(value)) {\n              activated.value = newActivated\n              return\n            }\n          }\n        }\n      },\n      children,\n      parents,\n      disabled,\n      getPath,\n    },\n  }\n\n  provide(VNestedSymbol, nested)\n\n  return nested.root\n}\n\nexport const useNestedItem = (id: MaybeRefOrGetter<unknown>, isDisabled: MaybeRefOrGetter<boolean>, isGroup: boolean) => {\n  const parent = inject(VNestedSymbol, emptyNested)\n\n  const uidSymbol = Symbol('nested item')\n  const computedId = computed(() => {\n    const idValue = toRaw(toValue(id))\n    return idValue !== undefined ? idValue : uidSymbol\n  })\n\n  const item = {\n    ...parent,\n    id: computedId,\n    open: (open: boolean, e: Event) => parent.root.open(computedId.value, open, e),\n    openOnSelect: (open: boolean, e?: Event) => parent.root.openOnSelect(computedId.value, open, e),\n    isOpen: computed(() => parent.root.opened.value.has(computedId.value)),\n    parent: computed(() => parent.root.parents.value.get(computedId.value)),\n    activate: (activated: boolean, e?: Event) => parent.root.activate(computedId.value, activated, e),\n    isActivated: computed(() => parent.root.activated.value.has(computedId.value)),\n    scrollToActive: parent.root.scrollToActive,\n    select: (selected: boolean, e?: Event) => parent.root.select(computedId.value, selected, e),\n    isSelected: computed(() => parent.root.selected.value.get(computedId.value) === 'on'),\n    isIndeterminate: computed(() => parent.root.selected.value.get(computedId.value) === 'indeterminate'),\n    isLeaf: computed(() => !parent.root.children.value.get(computedId.value)),\n    isGroupActivator: parent.isGroupActivator,\n  }\n\n  onBeforeMount(() => {\n    if (parent.isGroupActivator || parent.root.itemsRegistration.value === 'props') return\n    nextTick(() => {\n      parent.root.register(computedId.value, parent.id.value, toValue(isDisabled), isGroup)\n    })\n  })\n\n  onBeforeUnmount(() => {\n    if (parent.isGroupActivator || parent.root.itemsRegistration.value === 'props') return\n    parent.root.unregister(computedId.value)\n  })\n\n  watch(computedId, (val, oldVal) => {\n    if (parent.isGroupActivator || parent.root.itemsRegistration.value === 'props') return\n    parent.root.unregister(oldVal)\n    nextTick(() => {\n      parent.root.register(val, parent.id.value, toValue(isDisabled), isGroup)\n    })\n  })\n\n  watch(() => toValue(isDisabled), val => {\n    parent.root.updateDisabled(computedId.value, val)\n  })\n\n  isGroup && provide(VNestedSymbol, item)\n\n  return item\n}\n\nexport const useNestedGroupActivator = () => {\n  const parent = inject(VNestedSymbol, emptyNested)\n\n  provide(VNestedSymbol, { ...parent, isGroupActivator: true })\n}\n"],"mappings":"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","ignoreList":[]}