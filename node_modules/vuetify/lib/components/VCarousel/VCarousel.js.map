{"version":3,"file":"VCarousel.js","names":["VBtn","VDefaultsProvider","VProgressLinear","makeVWindowProps","VWindow","IconValue","useLocale","useProxiedModel","nextTick","onMounted","ref","watch","convertToUnit","genericComponent","propsFactory","useRender","makeVCarouselProps","color","String","cycle","Boolean","delimiterIcon","type","default","height","Number","hideDelimiters","hideDelimiterBackground","interval","validator","value","progress","verticalDelimiters","continuous","mandatory","showArrows","VCarousel","name","props","emits","setup","_ref","slots","model","t","windowRef","slideTimeout","restartTimeout","val","window","clearTimeout","startTimeout","setTimeout","group","next","requestAnimationFrame","onDelimiterKeyDown","e","direction","key","preventDefault","prev","$el","querySelector","focus","windowProps","filterProps","_createVNode","_mergeProps","$event","class","style","additional","_ref2","_createElementVNode","_Fragment","left","right","items","length","icon","size","variant","map","item","index","id","isSelected","onClick","select","onKeydown","undefined","getItemIndex"],"sources":["../../../src/components/VCarousel/VCarousel.tsx"],"sourcesContent":["// Styles\nimport './VCarousel.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VProgressLinear } from '@/components/VProgressLinear'\nimport { makeVWindowProps, VWindow } from '@/components/VWindow/VWindow'\n\n// Composables\nimport { IconValue } from '@/composables/icons'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { nextTick, onMounted, ref, watch } from 'vue'\nimport { convertToUnit, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VWindowSlots } from '@/components/VWindow/VWindow'\nimport type { GroupProvide } from '@/composables/group'\nimport type { GenericProps } from '@/util'\n\nexport const makeVCarouselProps = propsFactory({\n  color: String,\n  cycle: Boolean,\n  delimiterIcon: {\n    type: IconValue,\n    default: '$delimiter',\n  },\n  height: {\n    type: [Number, String],\n    default: 500,\n  },\n  hideDelimiters: Boolean,\n  hideDelimiterBackground: Boolean,\n  interval: {\n    type: [Number, String],\n    default: 6000,\n    validator: (value: string | number) => Number(value) > 0,\n  },\n  progress: [Boolean, String],\n  verticalDelimiters: [Boolean, String] as PropType<boolean | 'left' | 'right'>,\n\n  ...makeVWindowProps({\n    continuous: true,\n    mandatory: 'force' as const,\n    showArrows: true,\n  }),\n}, 'VCarousel')\n\ntype VCarouselSlots = Omit<VWindowSlots, 'additional'> & {\n  item: {\n    props: Record<string, any>\n    item: {\n      id: string\n      value: unknown\n      disabled: boolean | undefined\n    }\n  }\n}\n\nexport const VCarousel = genericComponent<new <T>(\n  props: {\n    modelValue?: T\n    'onUpdate:modelValue'?: (value: T) => void\n  },\n  slots: VCarouselSlots,\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VCarousel',\n\n  props: makeVCarouselProps(),\n\n  emits: {\n    'update:modelValue': (value: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const model = useProxiedModel(props, 'modelValue')\n    const { t } = useLocale()\n    const windowRef = ref<VWindow>()\n\n    let slideTimeout = -1\n    watch(model, restartTimeout)\n    watch(() => props.interval, restartTimeout)\n    watch(() => props.cycle, val => {\n      if (val) restartTimeout()\n      else window.clearTimeout(slideTimeout)\n    })\n\n    onMounted(startTimeout)\n\n    function startTimeout () {\n      if (!props.cycle || !windowRef.value) return\n\n      slideTimeout = window.setTimeout(\n        windowRef.value.group.next,\n        Number(props.interval) > 0 ? Number(props.interval) : 6000\n      )\n    }\n\n    function restartTimeout () {\n      window.clearTimeout(slideTimeout)\n      window.requestAnimationFrame(startTimeout)\n    }\n\n    function onDelimiterKeyDown (e: KeyboardEvent, group: GroupProvide) {\n      if (\n        (props.direction === 'horizontal' && e.key === 'ArrowLeft') ||\n        (props.direction === 'vertical' && e.key === 'ArrowUp')\n      ) {\n        e.preventDefault()\n        group.prev()\n        nextTick(() => windowRef.value?.$el.querySelector('.v-btn--active')?.focus())\n      }\n\n      if (\n        (props.direction === 'horizontal' && e.key === 'ArrowRight') ||\n        (props.direction === 'vertical' && e.key === 'ArrowDown')\n      ) {\n        e.preventDefault()\n        group.next()\n        nextTick(() => windowRef.value?.$el.querySelector('.v-btn--active')?.focus())\n      }\n    }\n\n    useRender(() => {\n      const windowProps = VWindow.filterProps(props)\n\n      return (\n        <VWindow\n          ref={ windowRef }\n          { ...windowProps }\n          v-model={ model.value }\n          class={[\n            'v-carousel',\n            {\n              'v-carousel--hide-delimiter-background': props.hideDelimiterBackground,\n              'v-carousel--vertical-delimiters': props.verticalDelimiters,\n            },\n            props.class,\n          ]}\n          style={[\n            { height: convertToUnit(props.height) },\n            props.style,\n          ]}\n        >\n          {{\n            default: slots.default,\n            additional: ({ group }: { group: GroupProvide }) => (\n              <>\n                { !props.hideDelimiters && (\n                  <div\n                    class=\"v-carousel__controls\"\n                    style={{\n                      left: props.verticalDelimiters === 'left' && props.verticalDelimiters ? 0 : 'auto',\n                      right: props.verticalDelimiters === 'right' ? 0 : 'auto',\n                    }}\n                  >\n                    { group.items.value.length > 0 && (\n                      <VDefaultsProvider\n                        defaults={{\n                          VBtn: {\n                            color: props.color,\n                            icon: props.delimiterIcon,\n                            size: 'x-small',\n                            variant: 'text',\n                          },\n                        }}\n                        scoped\n                      >\n                        { group.items.value.map((item, index) => {\n                          const props = {\n                            id: `carousel-item-${item.id}`,\n                            'aria-label': t('$vuetify.carousel.ariaLabel.delimiter', index + 1, group.items.value.length),\n                            class: [\n                              'v-carousel__controls__item',\n                              group.isSelected(item.id) && 'v-btn--active',\n                            ],\n                            onClick: () => group.select(item.id, true),\n                            onKeydown: (e: KeyboardEvent) => onDelimiterKeyDown(e, group),\n                          }\n\n                          return slots.item\n                            ? slots.item({ props, item })\n                            : (<VBtn { ...item } { ...props } />)\n                        })}\n                      </VDefaultsProvider>\n                    )}\n                  </div>\n                )}\n\n                { props.progress && (\n                  <VProgressLinear\n                    absolute\n                    class=\"v-carousel__progress\"\n                    color={ typeof props.progress === 'string' ? props.progress : undefined }\n                    modelValue={ (group.getItemIndex(model.value) + 1) / group.items.value.length * 100 }\n                  />\n                )}\n              </>\n            ),\n            prev: slots.prev,\n            next: slots.next,\n          }}\n        </VWindow>\n      )\n    })\n\n    return {}\n  },\n})\n\nexport type VCarousel = InstanceType<typeof VCarousel>\n"],"mappings":"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","ignoreList":[]}