{"version":3,"file":"VColorPickerPreview.js","names":["VBtn","VSlider","makeComponentProps","IconValue","useLocale","onUnmounted","toRef","nullColor","defineComponent","HSVtoCSS","parseColor","propsFactory","RGBtoHSV","SUPPORTS_EYE_DROPPER","useRender","makeVColorPickerPreviewProps","color","type","Object","disabled","Boolean","readonly","hideAlpha","hideEyeDropper","eyeDropperIcon","default","VColorPickerPreview","name","props","emits","setup","_ref","emit","t","abortController","AbortController","isInteractive","abort","openEyeDropper","value","eyeDropper","window","EyeDropper","result","open","signal","colorHexValue","sRGBHex","e","_createElementVNode","_normalizeClass","class","_normalizeStyle","style","_createVNode","background","h","a"],"sources":["../../../src/components/VColorPicker/VColorPickerPreview.tsx"],"sourcesContent":["// Styles\nimport './VColorPickerPreview.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VSlider } from '@/components/VSlider'\n\n// Composables\nimport { makeComponentProps } from '@/composables/component'\nimport { IconValue } from '@/composables/icons'\nimport { useLocale } from '@/composables/locale'\n\n// Utilities\nimport { onUnmounted, toRef } from 'vue'\nimport { nullColor } from './util'\nimport {\n  defineComponent,\n  HSVtoCSS,\n  parseColor,\n  propsFactory,\n  RGBtoHSV,\n  SUPPORTS_EYE_DROPPER,\n  useRender,\n} from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { HSV } from '@/util'\n\nexport const makeVColorPickerPreviewProps = propsFactory({\n  color: {\n    type: Object as PropType<HSV | null>,\n  },\n  disabled: Boolean,\n  readonly: Boolean,\n  hideAlpha: Boolean,\n  hideEyeDropper: Boolean,\n  eyeDropperIcon: {\n    type: IconValue,\n    default: '$eyeDropper',\n  },\n\n  ...makeComponentProps(),\n}, 'VColorPickerPreview')\n\nexport const VColorPickerPreview = defineComponent({\n  name: 'VColorPickerPreview',\n\n  props: makeVColorPickerPreviewProps(),\n\n  emits: {\n    'update:color': (color: HSV) => true,\n  },\n\n  setup (props, { emit }) {\n    const { t } = useLocale()\n\n    const abortController = new AbortController()\n\n    const isInteractive = toRef(() => !props.disabled && !props.readonly)\n\n    onUnmounted(() => abortController.abort())\n\n    async function openEyeDropper () {\n      if (!SUPPORTS_EYE_DROPPER || !isInteractive.value) return\n\n      const eyeDropper = new window.EyeDropper()\n      try {\n        const result = await eyeDropper.open({ signal: abortController.signal })\n        const colorHexValue = RGBtoHSV(parseColor(result.sRGBHex))\n        emit('update:color', { ...(props.color ?? nullColor), ...colorHexValue })\n      } catch (e) {}\n    }\n\n    useRender(() => (\n      <div\n        class={[\n          'v-color-picker-preview',\n          {\n            'v-color-picker-preview--hide-alpha': props.hideAlpha,\n          },\n          props.class,\n        ]}\n        style={ props.style }\n      >\n        { SUPPORTS_EYE_DROPPER && !props.hideEyeDropper && (\n          <div class=\"v-color-picker-preview__eye-dropper\" key=\"eyeDropper\">\n            <VBtn\n              aria-label={ t('$vuetify.colorPicker.ariaLabel.eyedropper') }\n              density=\"comfortable\"\n              disabled={ props.disabled }\n              readonly={ props.readonly }\n              icon={ props.eyeDropperIcon }\n              variant=\"plain\"\n              onClick={ openEyeDropper }\n            />\n          </div>\n        )}\n\n        <div class=\"v-color-picker-preview__dot\">\n          <div style={{ background: HSVtoCSS(props.color ?? nullColor) }} />\n        </div>\n\n        <div class=\"v-color-picker-preview__sliders\">\n          <VSlider\n            class=\"v-color-picker-preview__track v-color-picker-preview__hue\"\n            aria-label={ t('$vuetify.colorPicker.ariaLabel.hueSlider') }\n            modelValue={ props.color?.h }\n            onUpdate:modelValue={ h => emit('update:color', { ...(props.color ?? nullColor), h }) }\n            step={ 1 }\n            min={ 0 }\n            max={ 360 }\n            disabled={ props.disabled }\n            readonly={ props.readonly }\n            thumbSize={ 14 }\n            trackSize={ 8 }\n            trackFillColor=\"white\"\n            hideDetails\n          />\n\n          { !props.hideAlpha && (\n            <VSlider\n              class=\"v-color-picker-preview__track v-color-picker-preview__alpha\"\n              aria-label={ t('$vuetify.colorPicker.ariaLabel.alphaSlider') }\n              modelValue={ props.color?.a ?? 1 }\n              onUpdate:modelValue={ a => emit('update:color', { ...(props.color ?? nullColor), a }) }\n              step={ 0.01 }\n              min={ 0 }\n              max={ 1 }\n              disabled={ props.disabled }\n              readonly={ props.readonly }\n              thumbSize={ 14 }\n              trackSize={ 8 }\n              trackFillColor=\"white\"\n              hideDetails\n            />\n          )}\n        </div>\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VColorPickerPreview = InstanceType<typeof VColorPickerPreview>\n"],"mappings":"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","ignoreList":[]}