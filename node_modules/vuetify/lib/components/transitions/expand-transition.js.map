{"version":3,"file":"expand-transition.js","names":["expandedParentClass","arguments","length","undefined","type","onBeforeEnter","el","_parent","parentNode","_initialStyle","transition","style","overflow","width","height","onEnter","initialStyle","setProperty","offsetWidth","offsetHeight","includes","classList","add","requestAnimationFrame","onAfterEnter","resetStyles","onEnterCancelled","onLeave","onAfterLeave","onLeaveCancelled","remove","w","h"],"sources":["../../../src/components/transitions/expand-transition.ts"],"sourcesContent":["interface HTMLExpandElement extends HTMLElement {\n  _parent?: (Node & ParentNode & HTMLElement) | null\n  _initialStyle?: {\n    transition: string\n    overflow: string\n    height?: string | null\n    width?: string | null\n  }\n}\n\nexport default function (expandedParentClass = '', type: 'x' | 'y' | 'both' = 'y') {\n  return {\n    onBeforeEnter (el: HTMLExpandElement) {\n      el._parent = el.parentNode as (Node & ParentNode & HTMLElement) | null\n      el._initialStyle = {\n        transition: el.style.transition,\n        overflow: el.style.overflow,\n        width: el.style.width,\n        height: el.style.height,\n      }\n    },\n\n    onEnter (el: HTMLExpandElement) {\n      const initialStyle = el._initialStyle\n      if (!initialStyle) return\n\n      el.style.setProperty('transition', 'none', 'important')\n      // Hide overflow to account for collapsed margins in the calculated height\n      el.style.overflow = 'hidden'\n      const offsetWidth = `${el.offsetWidth}px`\n      const offsetHeight = `${el.offsetHeight}px`\n\n      if (['x', 'both'].includes(type)) el.style.width = '0'\n      if (['y', 'both'].includes(type)) el.style.height = '0'\n\n      void el.offsetHeight // force reflow\n\n      el.style.transition = initialStyle.transition\n\n      if (expandedParentClass && el._parent) {\n        el._parent.classList.add(expandedParentClass)\n      }\n\n      requestAnimationFrame(() => {\n        if (['x', 'both'].includes(type)) el.style.width = offsetWidth\n        if (['y', 'both'].includes(type)) el.style.height = offsetHeight\n      })\n    },\n\n    onAfterEnter: resetStyles,\n    onEnterCancelled: resetStyles,\n\n    onLeave (el: HTMLExpandElement) {\n      el._initialStyle = {\n        transition: '',\n        overflow: el.style.overflow,\n        width: el.style.width,\n        height: el.style.height,\n      }\n\n      el.style.overflow = 'hidden'\n      if (['x', 'both'].includes(type)) el.style.width = `${el.offsetWidth}px`\n      if (['y', 'both'].includes(type)) el.style.height = `${el.offsetHeight}px`\n      void el.offsetHeight // force reflow\n\n      requestAnimationFrame(() => {\n        if (['x', 'both'].includes(type)) el.style.width = '0'\n        if (['y', 'both'].includes(type)) el.style.height = '0'\n      })\n    },\n\n    onAfterLeave,\n    onLeaveCancelled: onAfterLeave,\n  }\n\n  function onAfterLeave (el: HTMLExpandElement) {\n    if (expandedParentClass && el._parent) {\n      el._parent.classList.remove(expandedParentClass)\n    }\n    resetStyles(el)\n  }\n\n  function resetStyles (el: HTMLExpandElement) {\n    if (!el._initialStyle) return\n\n    const { width: w, height: h } = el._initialStyle\n    el.style.overflow = el._initialStyle.overflow\n    if (w != null && ['x', 'both'].includes(type)) el.style.width = w\n    if (h != null && ['y', 'both'].includes(type)) el.style.height = h\n    delete el._initialStyle\n  }\n}\n"],"mappings":"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","ignoreList":[]}